<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

  <head>
	<link href=https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.20/css/dataTables.bootstrap4.min.css rel=stylesheet>
	<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
	<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">

	<script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js></script>
	<script src=https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.20/js/jquery.dataTables.min.js></script>
	<script src=https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.20/js/dataTables.bootstrap4.min.js></script>
  
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <title>Corona Virus Data</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    
  </head>

  <body>
  <div class="container-fluid p-3 mb-2 bg-light text-dark" >
  <h1 align="center">Covid-19 Tracker</h1>
  <!-- <p>This application shows the Covid-19 statistics</p> -->

  <div class="jumbotron">
	  <h1 class="display-3 comma" th:text="${totalCases}"></h1>
<!-- 	  <h1 class="display-3" th:text="'numberWithCommas(\'' + ${totalCases} + '\');'"></h1> -->
	  
	  <p class="lead" th:text="${lastUpdatedDate}">today</p>
	  <hr class="my-3">
	 
	<div class="row">
	   <div class="col-sm-4">
	   <div class="card bg-light mb-3" style="max-width: 18rem;">
	  	<div class="card-header">Total Active Cases</div>
	  	<div class="card-body">
	    	<h5 class="card-title comma" th:text="${totalActiveCases}">0</h5>
	    	<p class="card-text">Total active cases across the world.</p>
	  	</div>
	  </div>
	  </div>
	  
	  <div class="col-sm-4">
	   <div class="card bg-light mb-3" style="max-width: 18rem;">
	  	<div class="card-header">Total Death</div>
	  	<div class="card-body">
	    	<h5 class="card-title comma" th:text="${totalDeathCount}">0</h5>
	    	<p class="card-text">Total Deaths across the world.</p>
	  	</div>
	  </div>
	  </div>
	  
	  <div class="col-sm-4">
	   <div class="card bg-light mb-3" style="max-width: 18rem;">
	  	<div class="card-header">Total Recoveries</div>
	  	<div class="card-body">
	    	<h5 class="card-title comma" th:text="${totalRecoveries}">0</h5>
	    	<p class="card-text">Total Recoveries across the world.</p>
	  	</div>
	  </div>
	  </div>
	  
	   <div class="col-sm-4">
	  <div class="card bg-light mb-3" style="max-width: 18rem;">
	  	<div class="card-header">New cases</div>
	  	<div class="card-body">
	    	<h5 class="card-title comma" th:text="${newCases}">0</h5>
	    	<p class="card-text">Total new cases reported since previous day.</p>
	  	</div>
	  </div>
	  </div>
	   <div class="col-sm-4">
	  <div class="card bg-light mb-3" style="max-width: 18rem;">
	  	<div class="card-header">New Recoveries</div>
	  	<div class="card-body">
	    	<h5 class="card-title comma" th:text="${newRecovered}">0</h5>
	    	<p class="card-text">Total new recoveries since previous day.</p>
	  	</div>
	  </div>
	  </div>
	   <div class="col-sm-4">
	  <div class="card bg-light mb-3" style="max-width: 18rem;">
	  	<div class="card-header">New Deaths</div>
	  	<div class="card-body">
	    	<h5 class="card-title comma" th:text="${newDeaths}">0</h5>
	    	<p class="card-text">Total new Deaths since previous day.</p>
	  	</div>
	  </div>
	  </div>
	</div>
	
  </div>

	<div class="table-responsive">
    <table class="table table-striped table-bordered" id="coronaData">
    <thead class="thead-dark">
      <tr>
        <th scope="col" class="font-weight-normal">Country</th>
        <th scope="col" class="font-weight-normal">Total Cases</th>
        <th scope="col" class="font-weight-normal">New Cases</th>
        <th scope="col" class="font-weight-normal">Total Death</th>
        <th scope="col" class="font-weight-normal">New Death</th>
        <th scope="col" class="font-weight-normal">Total Recovered</th>
        <th scope="col" class="font-weight-normal">New Recovered</th>
        <th scope="col" class="font-weight-normal">Total Active Cases</th>
      </tr>
      </thead>
      <tr th:each="locationStat : ${locationStats}">
        <td th:text="${locationStat.country}"></td>
        <td class="comma" th:text="${locationStat.latestTotalCases}">0</td>
        <td class="comma" th:text="${locationStat.diffFromPreviousDay}">0</td>
        <td class="comma" th:text="${locationStat.totalDeath}">0</td>
        <td class="comma" th:text="${locationStat.totalDeathFromPreviousDay}">0</td>
        <td class="comma" th:text="${locationStat.totalRecovered}">0</td>
        <td class="comma" th:text="${locationStat.totalRecoveredFromPrivousDay}">0</td>
        <td class="comma" th:text="${locationStat.totalActiveCases}">0</td>
      </tr>
    </table>
  </div>
  </div>
  </body>
  
</html>
<script>
	  $(document).ready( function () {
		  $('#coronaData').DataTable();
		  } );
	  
	  $('.comma').each(function(){
		  var item = $(this).text();
		  var num = Number(item).toLocaleString('en');
		  $(this).text(num);
	  });
</script>
